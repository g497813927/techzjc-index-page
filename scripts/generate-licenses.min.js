// @ts-nocheck
#!/usr/bin/env node
import fs from"node:fs";import path from"node:path";import licenseChecker from"license-checker";licenseChecker.init({start:process.cwd(),production:!0},((e,s)=>{e&&(console.error("Error running license-checker",e),process.exit(1));const i=Object.entries(s).map((([e,s])=>{let i="";return s.licenseFile&&fs.existsSync(s.licenseFile)&&(i=fs.readFileSync(s.licenseFile,"utf8")),{id:e,name:s.name||e.startsWith("@")?"@"+e.split("@")[1]:e.split("@")[0],version:s.version,licenses:s.licenses,licenseFile:s.licenseFile,repository:s.repository,licenseText:i}})),n=path.join(process.cwd(),"public");fs.existsSync(n)||fs.mkdirSync(n);const r=path.join(n,"LICENSES.json");fs.writeFileSync(r,JSON.stringify(i,null,2)),console.log(`Wrote ${i.length} license entries to ${r}`)}));